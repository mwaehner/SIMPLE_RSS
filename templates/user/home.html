{% extends "base.html" %}
{% load crispy_forms_tags %}

{% block title %}
    Home: {{ user.username }}
{% endblock %}

{% block content %}
    <h2 class="text-primary">Welcome, {{ user.username }}</h2>

    <h3>Active suscriptions</h3>
    <div>
    <ul>
            {% if subscriptions %}

                    {% for s in subscriptions %}
                        <li>
                        <p>{{ s.name }}</p>
                            <form method="get"  style="display:inline;" action="{% url 'show_articles' subscription_id=s.id %}">
                                <button type="submit" class="btn btn-primary" >View</button>
                            </form>
                            <form method="get" style="display:inline;"  action="{% url 'update_subscription' subscription_id=s.id %}">
                                <button type="submit" class="btn btn-primary" >Update</button>
                            </form>
                            <button type="submit" class="btn btn-primary" >Delete</button>
                        </li>

                        <br>
                    {% endfor %}


            {% else %}
                <p>You have no subscriptions.</p>
            {% endif %}
    </ul>
    </div>


    <div class="row">
        <p>Add link to RSS below</p>
        <form method="post" action="{% url 'new_subscription' %}">
            {{ subscription_form | crispy }}
            {% csrf_token %}
            <button type="submit" class="btn btn-success">Add</button>
        </form>
    </div>

    {% if show_updated %}
        {% include "modals/show_updated_no.html" with new_articles_no=updated_no %}
    {% endif %}





{% endblock %}
