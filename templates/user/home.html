{% extends "base.html" %}
{% load crispy_forms_tags %}
{% load static %}

{% block title %}
    Home: {{ user.username }}
{% endblock %}

{% block content %}
    <h2 class="text-primary">Welcome, {{ user.username }}</h2>

    <h3>Active suscriptions</h3>
    <div>
    <ul>
            {% if subscriptions %}

                    {% for subscription in subscriptions %}
                        <li>
                        <p>{{ subscription.name }}</p>
                            <form method="get"  style="display:inline;" action="{% url 'show_articles' subscription_id=subscription.id %}">
                                <button type="submit" class="btn btn-primary" >View</button>
                            </form>
                            <form method="post" style="display:inline;"  action="{% url 'update_subscription' subscription_id=subscription.id %}">
                                {% csrf_token %}
                                <button type="submit" class="btn btn-primary" >Update</button>
                            </form>
                            {% include "modals/delete_confirmation.html" with subs_id=subscription.id%}
                            <button type="submit" class="btn btn-primary" data-toggle="modal" data-target="#confirmDeleteModal{{ subscription.id }}">Delete</button>
                        </li>

                        <br>
                    {% endfor %}


            {% else %}
                <p>You have no subscriptions.</p>
            {% endif %}
    </ul>
    </div>


    <div class="row">
        <p>Add link to RSS below</p>
        <form method="post" action="{% url 'new_subscription' %}">
            {{ subscription_form | crispy }}
            {% csrf_token %}
            <button type="submit" class="btn btn-success">Add</button>
        </form>
    </div>

    {% if show_updated %}
        {% include "modals/show_updated_count.html" with new_articles_count=updated_count %}
    {% endif %}






{% endblock %}
